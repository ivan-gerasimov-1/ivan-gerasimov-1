---
import Icon from "#app/components/icon/icon.astro";

let links = [
	{
		id: "home",
		type: "icon",
		url: "/",
		icon: "home",
		isActive: true,
		isDisabled: false,
	},
	{
		id: "cv",
		type: "text",
		url: "/cv",
		label: "CV",
		isActive: false,
		isDisabled: false,
	},
	{
		id: "about",
		type: "text",
		url: "/about",
		label: "About",
		isActive: false,
		isDisabled: true,
	},
	{
		id: "blog",
		type: "text",
		url: "/blog",
		label: "Blog",
		isActive: false,
		isDisabled: true,
	},
	{
		id: "playground",
		type: "text",
		url: "/playground",
		label: "Playground",
		isActive: false,
		isDisabled: true,
	},
];
---

<nav class="nav">
	{
		links.map((link) => {
			if (link.type === "icon") {
				return (
					<a
						class:list={["navLink", { active: link.isActive }]}
						href={link.url}
					>
						{/* @ts-expect-error */}
						<Icon name={link.icon} width="20px" height="20px" />
					</a>
				);
			}

			return (
				<a
					class:list={[
						"navLink",
						{
							active: link.isActive,
							disabled: link.isDisabled,
						},
					]}
					href={link.url}
				>
					<span
						class="navItemLabel"
						data-disabled-label={link.isDisabled ? "Soon" : ""}
					>
						{link.label}
					</span>
				</a>
			);
		})
	}
</nav>

<style>
	.nav {
		--spacing-m: 0.375rem;
		--spacing-l: 1rem;
		--spacing-xl: 1.375rem;

		--fs-xs: 0.5rem;
		--fs-m: 0.75rem;

		--c-border: oklch(100% 0 0 / 5%);
		--c-background: oklch(100% 0 0 / 2.5%);

		--br-inner: 0.5rem;
		--br-outer: calc(var(--br-inner) + var(--spacing-m));

		--border-100: 1px solid var(--c-border);

		--transition-100: 0.15s ease-in-out;

		display: flex;

		gap: var(--spacing-m);
		padding: var(--spacing-m);

		font-family: var(--ff-monospace);
		font-size: var(--fs-m);

		border-radius: var(--br-outer);
		border-top-left-radius: 0;
		border-top-right-radius: 0;

		border: var(--border-100);
		border-top: none;

		background-color: var(--c-background);

		backdrop-filter: blur(100px);
	}

	.navLink {
		display: flex;
		align-items: center;
		justify-content: center;

		position: relative;

		padding: var(--spacing-m) var(--spacing-xl);

		border-radius: var(--br-inner);

		text-decoration: none;
		color: inherit;
		cursor: default;

		&:hover {
			&:not(.active)::after {
				opacity: 1;

				transform: scale(1);
			}
		}

		&::after {
			position: absolute;

			inset: 0;

			content: "";

			opacity: 0;

			background-color: oklch(100% 0 0 / 7.5%);

			border-radius: var(--br-inner);

			transition:
				transform var(--transition-100),
				opacity var(--transition-100);

			transform: scale(0.875);
		}

		@media (max-width: 48rem) {
			& {
				padding-inline: var(--spacing-l);
			}
		}

		&.active {
			background-color: oklch(100% 0 0 / 7.5%);
		}

		&.disabled {
			pointer-events: none;

			color: oklch(from var(--fc-100) l c h / 50%);
		}
	}

	.navItemLabel {
		position: relative;

		&::before {
			position: absolute;

			top: -0.5rem;
			right: -0.5rem;

			content: attr(data-disabled-label);

			font-size: var(--fs-xs);

			color: oklch(from var(--fc-100) l c h / 25%);
		}
	}
</style>
